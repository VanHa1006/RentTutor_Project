@page
@model RentTutorPresentation.Pages.CoursesModel
@{
    var tutorId = HttpContext.Session.GetString("TutorId");
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

</head>
<body>

    @*  -----------------Carousel component------------------------- *@
    <div class="max-w-3xl mx-auto">

        <div id="default-carousel" class="relative rounded-lg overflow-hidden shadow-lg" data-carousel="static">
            <!-- Carousel wrapper -->
            <div class="relative h-80 md:h-96" data-carousel-inner>
                <!-- Item 1 -->
                <div class=" duration-700 ease-in-out" data-carousel-item>
                    <img src="~/img/Courses/banner03.jpg"
                         class="object-cover w-full h-full" alt="Slide 1">
                </div>
                <!-- Item 2 -->
                <div class=" duration-700 ease-in-out" data-carousel-item>
                    <img src="~/img/Courses/banner02.jpg"
                         class="object-cover w-full h-full" alt="Slide 2">
                </div>
                <!-- Item 3 -->
                <div class=" duration-700 ease-in-out" data-carousel-item>
                    <img src="~/img/Courses/Success.jpg"
                         class="object-cover w-full h-full" alt="Slide 3">
                </div>
            </div>
            <!-- Slider indicators -->
            <div class="flex absolute bottom-5 left-1/2 z-30 -translate-x-1/2 space-x-2" data-carousel-indicators>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
                <button type="button" class="w-3 h-3 rounded-full bg-gray-300 hover:bg-gray-400 focus:outline-none focus:bg-gray-400 transition"></button>
            </div>
            <!-- Slider controls -->
            <button type="button"
                    class="flex absolute top-1/2 left-3 z-40 items-center justify-center w-10 h-10 bg-gray-200/50 rounded-full hover:bg-gray-300 focus:outline-none transition"
                    data-carousel-prev>
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                     xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <button type="button"
                    class="flex absolute top-1/2 right-3 z-40 items-center justify-center w-10 h-10 bg-gray-200/50 rounded-full hover:bg-gray-300 focus:outline-none transition"
                    data-carousel-next>
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                     xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>

    </div>

    <script src="https://unpkg.com/flowbite@1.4.7/dist/flowbite.js"></script>

    @*  -----------------------Tutors component------------------------- *@

    <div class="max-w-5xl mx-auto">
        <div class="text-center p-10">
            <h1 class="font-bold text-3xl mb-4">Popular Instructors</h1>
            <h1 class="text-2xl">These real-world experts are highly rated by learners like you.</h1>
        </div>

        <div class="max-w-8xl mx-auto relative">
            <div id="tutors-carousel" class="overflow-x-scroll scrollbar-hide mb-4 relative px-0.5" style="overflow-y: hidden;">
                <div id="tutors-container" class="flex snap-x snap-mandatory gap-4" style="width: max-content;">
                    @foreach (var tutor in Model.Tutor.Items)
                    {
                         <a asp-page="./TutorDetail" asp-route-id="@tutor.Tutor.TutorId">
                        <div class="flex-none w-64 snap-center cursor-pointer">
                            <div class="bg-white border border-gray-200 rounded-lg overflow-hidden mb-4">

                                <img src="/img/Tutor.jpg" alt="@tutor.FullName" class="w-full h-40 object-cover">

                                <div class="p-4">
                                    <h3 class="text-lg leading-6 font-bold text-gray-900">@tutor.FullName</h3>
                                    <p class="text-gray-600 mt-2 text-sm">@tutor.Tutor.Specialization</p>
                                    <div class="flex justify-between items-center mt-4">
                                        <span class="text-sm text-gray-500 flex items-center">
                                            Rating: 5
                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-yellow-500 ml-1" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.29 3.97a1 1 0 00.95.69h4.176c.97 0 1.371 1.24.588 1.81l-3.388 2.46a1 1 0 00-.364 1.118l1.29 3.97c.3.921-.755 1.688-1.54 1.118l-3.388-2.46a1 1 0 00-1.176 0l-3.388 2.46c-.784.57-1.838-.197-1.54-1.118l1.29-3.97a1 1 0 00-.364-1.118L2.146 9.397c-.783-.57-.382-1.81.588-1.81h4.176a1 1 0 00.95-.69l1.29-3.97z" />
                                            </svg>
                                        </span>
                                        <span class="text-sm text-gray-500">Students: 15</span>
                                    </div>
                                    <div class="mt-2 text-sm text-gray-500">Courses: 1</div>
                                </div>
                            </div>
                        </div>
                        </a>
                    }
                    @* Repeat this block for each tutor *@
                </div>
            </div>
            <!-- Previous Button -->
            <button id="prevButton" type="button"
                    class="flex absolute top-1/2 left-3 z-40 items-center justify-center w-10 h-10 bg-gray-200/50 rounded-full hover:bg-gray-300 focus:outline-none transition">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                     xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>

            <!-- Next Button -->
            <button id="nextButton" type="button"
                    class="flex absolute top-1/2 right-3 z-40 items-center justify-center w-10 h-10 bg-gray-200/50 rounded-full hover:bg-gray-300 focus:outline-none transition">
                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                     xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carousel = document.getElementById('tutors-carousel');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');

            let scrollAmount = 300;

            prevButton.addEventListener('click', () => {
                carousel.scrollBy({
                    left: -scrollAmount,
                    behavior: 'smooth'
                });
            });

            nextButton.addEventListener('click', () => {
                carousel.scrollBy({
                    left: scrollAmount,
                    behavior: 'smooth'
                });
            });
        });
    </script>


    @*  -----------------Search Courses component------------------------- *@

    <div class="max-w-3xl mx-auto p-10">
        <div class="text-center mb-8">
            <h1 class="font-bold text-3xl">All Courses</h1>
        </div>
        <form method="post" asp-page-handler="Search" id="searchForm" class="flex items-center space-x-4 mb-8">
            <label for="searchTerm" class="text-xl font-medium text-gray-700">Search:</label>
            <input type="text" id="searchTerm" name="SearchTerm" value="@Model.SearchTerm" class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" />
            <button type="submit" class="bg-indigo-700 text-white py-2.5 px-4 rounded-lg hover:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <svg class="h-6 w-6"
                     fill="none"
                     stroke-linecap="round"
                     stroke-linejoin="round"
                     stroke-width="2"
                     viewBox="0 0 24 24"
                     stroke="currentColor">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </button>
        </form>

        <script>
            document.getElementById('searchForm').addEventListener('submit', function (e) {
                const searchTerm = document.getElementById('searchTerm').value.trim();
                if (!searchTerm) {
                    // If no search term, clear the input value and submit the form
                    document.getElementById('searchTerm').value = '';
                    // No need for e.preventDefault() because you want to submit the form
                }
            });
        </script>
    </div>

        @* <div class="flex items-center space-x-4">
            <!-- Star Rating Filter -->
            <div class="flex items-center mb-4 lg:mb-0">
                <label for="star-rating" class="mr-2 font-medium">Stars:</label>
                <select id="star-rating" class="border border-gray-300 rounded-md p-2">
                    <option value="all">All</option>
                    <option value="5">5 Stars</option>
                    <option value="4">4 Stars & Up</option>
                    <option value="3">3 Stars & Up</option>
                </select>
            </div>

            <!-- Category Filter -->
            <div class="flex items-center mb-4 lg:mb-0">
                <label for="category" class="mr-2 font-medium">Category:</label>
                <select id="category" class="border border-gray-300 rounded-md p-2">
                    <option value="all">All Categories</option>
                    <option value="web-development">Web Development</option>
                    <option value="data-science">Data Science</option>
                    <option value="software-testing">Software Testing</option>
                    <option value="database-design">Database Design</option>
                </select>
            </div>

            <!-- Sort By Dropdown -->
            <div class="flex items-center mb-4 lg:mb-0">
                <label for="sort-by" class="mr-2 font-medium">Sort by:</label>
                <select id="sort-by" class="border border-gray-300 rounded-md p-2">
                    <option value="popular">Most Popular</option>
                    <option value="rating">Highest Rating</option>
                    <option value="newest">Newest</option>
                </select>
            </div>
        </div> *@
    </div>
    @*  -----------------All Courses component------------------------- *@
    @if (Model.Course != null && Model.Course.Items.Any())
    {
        <section id="Courses"
                 class="w-fit mx-auto grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 justify-items-center justify-center gap-y-20 gap-x-14 mt-10 mb-5">
            @foreach (var course in Model.Course.Items)
            {
                <div class="max-w-xs max-h-xs bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl">

                    <a asp-page="./CoursesDetail" asp-route-id="@course.CourseId">
                        <img src="@course.Image" alt="@course.CourseName" class="h-60 w-full object-cover rounded-t-xl transition-transform duration-300 courseImage" />
                    </a>
                    <div class="px-4 py-3">
                        <span class="text-gray-400 mr-3 uppercase text-xs">@course.CourseName</span>
                        <p class="text-lg font-bold text-black capitalize whitespace-normal">@course.CourseName</p>
                        <div class="flex items-center">
                            <p class="text-lg font-semibold text-black cursor-auto my-3">@(course.Price - course.DiscountPrice)</p>
                                <del>
                                    <p class="text-sm text-gray-600 cursor-auto ml-2">@course.Price</p>
                                </del>
                            <p class="ml-auto text-lg font-semibold text-black cursor-auto my-3">@course.Hours Hours</p>
                        </div>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-sm text-gray-500 flex items-center">
                                Rating: 5
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-yellow-500 ml-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.29 3.97a1 1 0 00.95.69h4.176c.97 0 1.371 1.24.588 1.81l-3.388 2.46a1 1 0 00-.364 1.118l1.29 3.97c.3.921-.755 1.688-1.54 1.118l-3.388-2.46a1 1 0 00-1.176 0l-3.388 2.46c-.784.57-1.838-.197-1.54-1.118l1.29-3.97a1 1 0 00-.364-1.118L2.146 9.397c-.783-.57-.382-1.81.588-1.81h4.176a1 1 0 00.95-.69l1.29-3.97z" />
                                </svg>
                            </span>

                            <div class="flex items-center space-x-4">
                               @*  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-black-500 cursor-pointer heart-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                                </svg> *@


                                @if (string.IsNullOrEmpty(tutorId))
                                {
                                    <a asp-page="/Student/AddToCart" asp-route-id="@course.CourseId" asp-route-pageIndex="@Model.PageIndex" asp-route-searchTerm="@Model.SearchTerm" class="btn border border-secondary rounded-pill px-3 text-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-indigo-500 cursor-pointer cart-icon" viewBox="0 0 24 24" fill="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                    </a>
                                }
                               @*  @if (string.IsNullOrEmpty(tutorId))
                                {
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-indigo-500 cursor-pointer cart-icon" viewBox="0 0 24 24" fill="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                } *@
                                
                            </div>
                        </div>
                    </div>
                </div>
            }
        </section>
    }
    else
    {
        <p>No results found.</p>
    }

        @* Pagination *@
        @*     <div class="flex justify-center mt-10">
        <a asp-page="./Courses" asp-route-page="@(Model.CurrentPage - 1)" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md cursor-pointer @(Model.CurrentPage == 1 ? "disabled:opacity-50" : "")">Previous</a>
        <span class="px-4 py-2 mx-2 bg-gray-200 text-gray-700 rounded-md" id="pagination-info">Page @Model.CurrentPage of @Model.TotalPages</span>
        <a asp-page="./Courses" asp-route-page="@(Model.CurrentPage + 1)" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md cursor-pointer @(Model.CurrentPage == Model.TotalPages ? "disabled:opacity-50" : "")">Next</a>
        </div> *@
    <div class="flex justify-center mt-10">
        <a asp-page="/Courses" asp-route-SearchTerm="@Model.SearchTerm" asp-route-PageIndex="@(Model.PageIndex - 1)"
           class="@(Model.PageIndex == 1 ? "disabled" : "") btn btn-primary">Previous</a>

        <span>Page @Model.Course.Page of @Model.Course.TotalPages </span>

        <a asp-page="/Courses" asp-route-SearchTerm="@Model.SearchTerm" asp-route-PageIndex="@(Model.PageIndex + 1)"
           class="@(Model.PageIndex == Model.Course.TotalPages ? "disabled" : "") btn btn-primary">Next</a>
    </div>
</body>
</html>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}